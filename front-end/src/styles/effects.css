/* Appearance-only effects: particles, glow, glass, dividers, keyframes */
/* This file adds purely decorative styles. It does not change layout or logic. */

/* ========== 超炫酷霓虹效果 ========== */

/* 霓虹边框效果 */
.neon-border {
  position: relative;
  border: 2px solid transparent;
  background: linear-gradient(var(--surface-1), var(--surface-1)) padding-box,
              var(--g-aurora1) border-box;
  border-radius: 1.5rem;
}

.neon-border-cyan {
  border: 2px solid rgba(0, 245, 255, 0.5);
  box-shadow: 0 0 20px rgba(0, 245, 255, 0.4), inset 0 0 20px rgba(0, 245, 255, 0.1);
  animation: neon-pulse 2s ease-in-out infinite;
}

.neon-border-purple {
  border: 2px solid rgba(139, 92, 246, 0.5);
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.4), inset 0 0 20px rgba(139, 92, 246, 0.1);
  animation: neon-pulse 2s ease-in-out infinite;
}

@keyframes neon-pulse {
  0%, 100% { 
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.4), inset 0 0 20px rgba(139, 92, 246, 0.1);
  }
  50% { 
    box-shadow: 0 0 40px rgba(139, 92, 246, 0.6), inset 0 0 30px rgba(139, 92, 246, 0.2);
  }
}

/* 渐变文字效果 */
.gradient-text {
  background: var(--g-aurora1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradient-x 8s ease infinite;
  background-size: 200% auto;
}

.gradient-text-vibrant {
  background: linear-gradient(135deg, #f472b6 0%, #fbbf24 50%, #10b981 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradient-x 6s ease infinite;
  background-size: 200% auto;
}

/* 玻璃态卡片效果 - 增强版 */
.glass-card {
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.18);
  border-radius: 1.5rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.glass-card-light {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(16px) saturate(180%);
  border: 1px solid rgba(139, 92, 246, 0.2);
  box-shadow: 0 8px 32px rgba(139, 92, 246, 0.12);
}

/* 悬浮动画 */
.float-animation {
  animation: float 6s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

/* 闪光扫过效果 */
.shimmer-effect {
  position: relative;
  overflow: hidden;
}

.shimmer-effect::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.3),
    transparent
  );
  animation: shimmer 3s infinite;
}

@keyframes shimmer {
  0% { left: -100%; }
  100% { left: 100%; }
}

/* 扫描线效果 */
.scan-line {
  position: relative;
  overflow: hidden;
}

.scan-line::before {
  content: '';
  position: absolute;
  top: -100%;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(
    180deg,
    transparent,
    rgba(0, 245, 255, 0.8),
    transparent
  );
  box-shadow: 0 0 20px rgba(0, 245, 255, 0.8);
  animation: scan 4s linear infinite;
}

@keyframes scan {
  0% { top: -10%; }
  100% { top: 110%; }
}

/* 脉冲光晕效果 */
.glow-pulse {
  animation: glow-pulse-animation 2s ease-in-out infinite;
}

@keyframes glow-pulse-animation {
  0%, 100% {
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
  }
  50% {
    box-shadow: 0 0 40px rgba(139, 92, 246, 0.8), 0 0 60px rgba(0, 245, 255, 0.4);
  }
}

/* 3D悬浮卡片 */
.card-3d {
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
}

.card-3d:hover {
  transform: translateY(-8px) rotateX(2deg) rotateY(2deg);
}

/* 彩虹边框动画 */
.rainbow-border {
  position: relative;
  border-radius: 1.5rem;
  padding: 2px;
  background: linear-gradient(
    45deg,
    #ff0080,
    #ff8c00,
    #40e0d0,
    #ff0080
  );
  background-size: 400% 400%;
  animation: rainbow-animation 6s ease infinite;
}

.rainbow-border > * {
  background: var(--surface-1);
  border-radius: 1.4rem;
}

@keyframes rainbow-animation {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* 粒子爆发效果 */
.particle-burst {
  position: relative;
}

.particle-burst::before,
.particle-burst::after {
  content: '';
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--c-cyan);
  box-shadow: 
    0 0 10px var(--c-cyan),
    0 0 20px var(--c-cyan),
    0 0 30px var(--c-cyan);
  opacity: 0;
  animation: particle-burst-animation 3s ease-out infinite;
}

.particle-burst::before {
  top: 10%;
  left: 10%;
  animation-delay: 0s;
}

.particle-burst::after {
  bottom: 10%;
  right: 10%;
  animation-delay: 1.5s;
}

@keyframes particle-burst-animation {
  0% {
    opacity: 0;
    transform: scale(0);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(2) translate(50px, -50px);
  }
}

/* Generic scroll indicator (for non-hero contexts) */
.scroll-indicator {
  position: relative;
  width: 20px;
  height: 32px;
  display: grid;
  place-items: center;
  opacity: 0;
  pointer-events: none;
}
.scroll-indicator::before {
  content: "";
  width: 10px;
  height: 10px;
  border: 2px solid color-mix(in oklab, var(--accent-1), transparent 20%);
  border-left-color: transparent;
  border-bottom-color: transparent;
  transform: rotate(45deg);
  filter: drop-shadow(0 0 6px var(--accent-1));
}
.is-activated .scroll-indicator { opacity: 1; animation: bounceY 1.8s ease-in-out infinite; }
@keyframes bounceY { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(8px); } }

/* Divider: subtle aurora glow */
.divider-glow { height: 1px; background: var(--g-aurora1); box-shadow: 0 1px 12px rgba(131, 91, 255, 0.25); opacity: 0.85; }

/* Particles: floating sparks layer */
.particles-spark[data-keep] { position: relative; isolation: isolate; }
.particles-spark[data-keep]::before,
.particles-spark[data-keep]::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(14px 14px at 18% 22%, color-mix(in oklab, var(--accent-1) 40%, transparent), transparent 60%),
    radial-gradient(16px 16px at 62% 30%, color-mix(in oklab, var(--accent-2) 42%, transparent), transparent 60%),
    radial-gradient(12px 12px at 80% 66%, color-mix(in oklab, var(--accent-1) 36%, transparent), transparent 60%),
    radial-gradient(12px 12px at 30% 76%, color-mix(in oklab, var(--accent-2) 36%, transparent), transparent 60%);
  mix-blend-mode: screen;
  opacity: 0.45;
}
.particles-spark[data-keep]::before { animation: sparkDrift 28s linear infinite; }
.particles-spark[data-keep]::after { animation: sparkFloat 22s ease-in-out infinite; }
@keyframes sparkDrift { 0% { transform: translate3d(0,0,0); } 50% { transform: translate3d(2%, -1%, 0); } 100% { transform: translate3d(0,0,0); } }
@keyframes sparkFloat { 0%, 100% { filter: brightness(1); } 50% { filter: brightness(1.08); } }

/* Glass border helper */
.glass-border { backdrop-filter: blur(8px) saturate(1.1); border-radius: 20px; border: 1px solid color-mix(in oklab, var(--accent-1) 16%, var(--border)); }
.dark .glass-border { border-color: color-mix(in oklab, var(--accent-2) 14%, var(--border)); }

/* Magnet hover subtle lift */
.magnet-hover { transition: transform var(--t-fast) var(--ease-snap), filter var(--t-fast) var(--ease-snap); }
.magnet-hover:hover { transform: translateY(-1px) scale(1.02); filter: saturate(1.06); }

/* Enter cascade for child items (appearance only) */
.enter-cascade > * { transform: translateY(var(--enter-y, 12px)) scale(0.96); opacity: 0.85; transition: transform var(--t-mid) var(--ease-snap), opacity var(--t-mid) var(--ease-snap); }
.is-activated .enter-cascade > * { transform: translateY(0) scale(1); opacity: 1; }
.enter-cascade > *:nth-child(1) { transition-delay: calc(var(--stagger, 120ms) * 0); }
.enter-cascade > *:nth-child(2) { transition-delay: calc(var(--stagger, 120ms) * 1); }
.enter-cascade > *:nth-child(3) { transition-delay: calc(var(--stagger, 120ms) * 2); }
.enter-cascade > *:nth-child(4) { transition-delay: calc(var(--stagger, 120ms) * 3); }
.enter-cascade > *:nth-child(5) { transition-delay: calc(var(--stagger, 120ms) * 4); }
.enter-cascade > *:nth-child(6) { transition-delay: calc(var(--stagger, 120ms) * 5); }

/* Strong focus ring (optional utility) */
.focus-ring-strong:focus-visible { outline: 2px solid color-mix(in oklab, var(--accent-1) 42%, transparent); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent-2) 28%, transparent); }

/* ========== B1. 教练端导航/头部/侧栏改造 ========== */

/* Header 玻璃雾面效果 */
.u-header-glass {
  background: var(--surface-1);
  backdrop-filter: blur(12px) saturate(1.2);
  border-bottom: 1px solid var(--g-aurora);
  position: relative;
}

.u-header-glass::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: var(--g-aurora);
  box-shadow: 0 0 8px var(--g-aurora);
  opacity: 0.8;
}

/* Logo 轻外发光 */
.u-logo-glow {
  filter: drop-shadow(0 0 8px rgba(var(--accent-rgb), 0.3));
  transition: filter 0.3s ease;
}

.u-logo-glow:hover {
  filter: drop-shadow(0 0 12px rgba(var(--accent-rgb), 0.5));
}

/* Sidebar 当前项左侧离子彩条 */
.u-sidebar-item {
  position: relative;
  transition: transform 0.2s ease, background-color 0.2s ease;
}

.u-sidebar-item.is-active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(
    180deg,
    var(--accent) 0%,
    rgba(var(--accent-rgb), 0.8) 50%,
    var(--accent) 100%
  );
  box-shadow: 0 0 8px var(--accent);
  border-radius: 0 2px 2px 0;
}

/* 折叠菜单箭头渐变描边 */
.u-sidebar-arrow {
  border: 1px solid transparent;
  background: linear-gradient(var(--surface-1), var(--surface-1)) padding-box,
              linear-gradient(45deg, var(--accent), rgba(var(--accent-rgb), 0.3)) border-box;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.u-sidebar-arrow:hover {
  background: linear-gradient(var(--surface-2), var(--surface-2)) padding-box,
              linear-gradient(45deg, var(--accent), rgba(var(--accent-rgb), 0.6)) border-box;
}

/* hover 行右移 4px */
.u-sidebar-item:hover {
  transform: translateX(4px);
}

/* ========== B2. 教练端仪表盘改造 ========== */

/* KPI 卡玻璃效果 + 角标徽章 */
.u-kpi-card {
  background: rgba(var(--surface-1-rgb), 0.8);
  backdrop-filter: blur(8px) saturate(1.1);
  border: 1px solid rgba(var(--accent-rgb), 0.2);
  border-radius: 16px;
  position: relative;
  overflow: hidden;
}

.u-kpi-card::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 40px;
  height: 40px;
  background: var(--accent);
  clip-path: polygon(100% 0%, 0% 100%, 100% 100%);
  opacity: 0.8;
}

/* KPI 角标徽章（霓虹小角标） */
.u-kpi-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: radial-gradient(circle, var(--accent) 0%, rgba(var(--accent-rgb), 0.6) 50%, transparent 100%);
  box-shadow: 0 0 12px rgba(var(--accent-rgb), 0.7);
  pointer-events: none;
}

/* 数值遮罩滚动动效 */
.u-kpi-value {
  position: relative;
  overflow: hidden;
}

.u-kpi-value::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(var(--accent-rgb), 0.3) 50%,
    transparent 100%
  );
  animation: valueShimmer 2s ease-in-out infinite;
}

@keyframes valueShimmer {
  0% { left: -100%; }
  50% { left: 100%; }
  100% { left: 100%; }
}

/* 趋势图主题变量支持 */
.u-chart-themed {
  --chart-grid: rgba(var(--accent-rgb), 0.1);
  --chart-axis: rgba(var(--text-rgb), 0.3);
  --chart-tooltip-bg: var(--surface-2);
  --chart-tooltip-border: rgba(var(--accent-rgb), 0.3);
  --chart-area-opacity: 0.15;
}

/* ===== 页面级训练页面视觉效果 ===== */

/* ========== B3. 三训练页装饰增强 ========== */

/* Dribbling: 节奏波纹底板 + 节拍粒子 */
.u-dribbling-container {
  position: relative;
  --c-dribble: #f59e0b;
  --accent: var(--c-dribble);
}

.u-dribbling-rhythm-board {
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(circle at 25% 25%, rgba(245, 158, 11, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(245, 158, 11, 0.03) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

.u-beat-particles {
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(2px 2px at 20% 30%, var(--c-dribble), transparent),
    radial-gradient(2px 2px at 60% 70%, var(--c-dribble), transparent),
    radial-gradient(1px 1px at 80% 20%, var(--c-dribble), transparent),
    radial-gradient(1px 1px at 40% 80%, var(--c-dribble), transparent);
  background-size: 100px 100px, 120px 120px, 80px 80px, 90px 90px;
  animation: beatFloat 4s ease-in-out infinite;
  opacity: 0.4;
  pointer-events: none;
}

@keyframes beatFloat {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-2px) scale(1.02); }
}

/* Shooting: 投篮弧线 SVG + 命中离子火花 */
.u-shooting-container {
  position: relative;
  --c-shoot: #ef4444;
  --accent: var(--c-shoot);
}

.u-shooting-arc-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

.u-shooting-sparks {
  position: absolute;
  top: 20%;
  right: 20%;
  width: 60px;
  height: 60px;
  background: 
    radial-gradient(circle at 50% 50%, var(--c-shoot) 1px, transparent 2px),
    radial-gradient(circle at 30% 70%, var(--c-shoot) 0.5px, transparent 1px),
    radial-gradient(circle at 70% 30%, var(--c-shoot) 0.5px, transparent 1px);
  background-size: 20px 20px, 15px 15px, 18px 18px;
  animation: sparkBurst 2s ease-in-out infinite;
  opacity: 0;
  pointer-events: none;
}

.u-shooting-sparks.is-hit {
  animation: sparkHit 0.6s ease-out;
}

@keyframes sparkBurst {
  0%, 100% { opacity: 0; transform: scale(0.8); }
  50% { opacity: 0.6; transform: scale(1.2); }
}

@keyframes sparkHit {
  0% { opacity: 0; transform: scale(0.5); }
  30% { opacity: 1; transform: scale(1.5); }
  100% { opacity: 0; transform: scale(2); }
}

/* Defense: 线框盾牌背景 + 异常项警告样式 */
.u-defense-container {
  position: relative;
  --c-defense: #3b82f6;
  --accent: var(--c-defense);
}

.u-shield-background {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 200px;
  height: 240px;
  margin: -120px 0 0 -100px;
  background: none;
  border: 2px solid rgba(59, 130, 246, 0.1);
  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
  pointer-events: none;
  z-index: 0;
}

.u-shield-background::before {
  content: '';
  position: absolute;
  inset: 4px;
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.02) 0%,
    transparent 50%,
    rgba(59, 130, 246, 0.02) 100%
  );
  clip-path: inherit;
}

/* 异常项警告样式 */
.is-warn {
  border-color: var(--c-warn, #f59e0b) !important;
  box-shadow: 0 0 0 1px rgba(245, 158, 11, 0.2), 0 4px 12px rgba(245, 158, 11, 0.1);
}

.is-warn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(245, 158, 11, 0.05);
  border-radius: inherit;
  pointer-events: none;
}

/* ========== B4. 表格/表单/弹窗/提示改造 ========== */

/* 表格：暗色表头雾面渐变 + 可点击行左侧彩条 */
.u-table-glass {
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid rgba(var(--accent-rgb), 0.1);
}

.u-table-header {
  background: linear-gradient(
    135deg,
    rgba(var(--surface-2-rgb), 0.8) 0%,
    rgba(var(--surface-1-rgb), 0.9) 100%
  );
  backdrop-filter: blur(8px) saturate(1.1);
  border-bottom: 1px solid rgba(var(--accent-rgb), 0.2);
}

.u-table-row {
  position: relative;
  transition: all 0.2s ease;
  border-left: 2px solid transparent;
}

.u-table-row:hover {
  background: rgba(var(--accent-rgb), 0.05);
  backdrop-filter: blur(4px);
  box-shadow: 0 2px 8px rgba(var(--accent-rgb), 0.1);
  border-left-color: var(--accent);
}

.u-table-row.is-clickable {
  cursor: pointer;
}

.u-table-row.is-clickable::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--accent);
  transform: scaleY(0);
  transition: transform 0.2s ease;
}

.u-table-row.is-clickable:hover::before {
  transform: scaleY(1);
}

/* 表单：玻璃输入 + 彩色 Focus Ring */
.u-input-glass {
  background: rgba(var(--surface-1-rgb), 0.6);
  backdrop-filter: blur(8px) saturate(1.1);
  border: 1px solid rgba(var(--accent-rgb), 0.2);
  border-radius: 8px;
  transition: all 0.2s ease;
}

.u-input-glass:focus {
  background: rgba(var(--surface-1-rgb), 0.8);
  border-color: var(--accent);
  box-shadow: 
    0 0 0 3px rgba(var(--accent-rgb), 0.2),
    0 4px 12px rgba(var(--accent-rgb), 0.1);
}

.u-input-glass:disabled {
  filter: saturate(0.3);
  opacity: 0.6;
  cursor: not-allowed;
}

/* Modal/Drawer：背景模糊 + 标题下霓虹分隔线 */
.u-modal-backdrop {
  backdrop-filter: blur(8px);
  background: rgba(0, 0, 0, 0.4);
}

.u-modal-content {
  background: rgba(var(--surface-1-rgb), 0.95);
  backdrop-filter: blur(12px) saturate(1.2);
  border: 1px solid rgba(var(--accent-rgb), 0.2);
  border-radius: 16px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.u-modal-header {
  position: relative;
  padding-bottom: 16px;
}

.u-modal-header::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: var(--g-aurora);
  box-shadow: 0 0 8px var(--g-aurora);
  opacity: 0.8;
}

/* Toast/Tooltip：半透明烟雾底 + 彩色描边 */
.u-toast {
  background: rgba(var(--surface-2-rgb), 0.9);
  backdrop-filter: blur(12px) saturate(1.2);
  border: 1px solid rgba(var(--accent-rgb), 0.3);
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  animation: toastEnter 160ms ease-out;
}

.u-toast.is-leaving {
  animation: toastExit 120ms ease-in;
}

@keyframes toastEnter {
  0% {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes toastExit {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
}

.u-tooltip {
  background: rgba(var(--surface-2-rgb), 0.95);
  backdrop-filter: blur(8px) saturate(1.1);
  border: 1px solid rgba(var(--accent-rgb), 0.3);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  animation: tooltipEnter 160ms ease-out;
}

@keyframes tooltipEnter {
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* ========== B5. 视频叠加与骨架效果 ========== */

/* 播放器装饰层：荧光描边 */
.u-video-glow-border {
  position: absolute;
  inset: 0;
  border: 2px solid transparent;
  border-radius: 12px;
  background: linear-gradient(var(--surface-1), var(--surface-1)) padding-box,
              linear-gradient(45deg, var(--accent), rgba(var(--accent-rgb), 0.3)) border-box;
  pointer-events: none;
  z-index: 1;
}

/* 命中闪烁效果 */
.u-hit-flash {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at center,
    rgba(var(--accent-rgb), 0.3) 0%,
    transparent 70%
  );
  border-radius: 12px;
  opacity: 0;
  pointer-events: none;
  z-index: 2;
}

.u-hit-flash.is-flashing {
  animation: hitFlash 0.4s ease-out;
}

@keyframes hitFlash {
  0% { opacity: 0; transform: scale(1); }
  30% { opacity: 1; transform: scale(1.05); }
  100% { opacity: 0; transform: scale(1); }
}

/* 骨架扫光效果 */
.u-skeleton {
  background: linear-gradient(
    90deg,
    rgba(var(--surface-2-rgb), 0.8) 0%,
    rgba(var(--surface-2-rgb), 0.4) 50%,
    rgba(var(--surface-2-rgb), 0.8) 100%
  );
  background-size: 200% 100%;
  animation: skeletonShimmer 1.5s ease-in-out infinite;
  border-radius: 8px;
}

@keyframes skeletonShimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.u-skeleton-text {
  height: 1em;
  margin: 0.5em 0;
}

.u-skeleton-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
}

.u-skeleton-button {
  height: 36px;
  border-radius: 8px;
}

/* ========== B6. 登录/404等公共页改造 ========== */

/* 登录页：全屏渐变云雾 */
.u-login-background {
  position: fixed;
  inset: 0;
  background: 
    radial-gradient(circle at 20% 20%, rgba(var(--accent-rgb), 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(var(--accent-2-rgb), 0.12) 0%, transparent 50%),
    linear-gradient(135deg, var(--bg) 0%, rgba(var(--surface-1-rgb), 0.8) 100%);
  backdrop-filter: blur(1px);
}

/* 玻璃登录卡 */
.u-login-card {
  background: rgba(var(--surface-1-rgb), 0.9);
  backdrop-filter: blur(16px) saturate(1.3);
  border: 1px solid rgba(var(--accent-rgb), 0.2);
  border-radius: 20px;
  box-shadow: 
    0 20px 40px rgba(0, 0, 0, 0.1),
    0 0 0 1px rgba(255, 255, 255, 0.05) inset;
}

/* 错误提示左侧色条 */
.u-error-message {
  position: relative;
  padding: 12px 16px;
  background: rgba(var(--c-warn-rgb, 245, 158, 11), 0.1);
  border: 1px solid rgba(var(--c-warn-rgb, 245, 158, 11), 0.3);
  border-radius: 8px;
  border-left: 4px solid var(--c-warn, #f59e0b);
}

/* 404/500页：巨幅霓虹数字 */
.u-error-number {
  font-size: clamp(8rem, 20vw, 16rem);
  font-weight: 900;
  background: linear-gradient(
    45deg,
    var(--accent) 0%,
    rgba(var(--accent-rgb), 0.8) 50%,
    var(--accent) 100%
  );
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 
    0 0 20px rgba(var(--accent-rgb), 0.5),
    0 0 40px rgba(var(--accent-rgb), 0.3),
    0 0 60px rgba(var(--accent-rgb), 0.1);
  animation: neonPulse 2s ease-in-out infinite alternate;
}

@keyframes neonPulse {
  0% {
    filter: brightness(1) saturate(1);
    text-shadow: 
      0 0 20px rgba(var(--accent-rgb), 0.5),
      0 0 40px rgba(var(--accent-rgb), 0.3),
      0 0 60px rgba(var(--accent-rgb), 0.1);
  }
  100% {
    filter: brightness(1.2) saturate(1.3);
    text-shadow: 
      0 0 30px rgba(var(--accent-rgb), 0.8),
      0 0 60px rgba(var(--accent-rgb), 0.5),
      0 0 90px rgba(var(--accent-rgb), 0.2);
  }
}

/* 返回 CTA 按钮 */
.u-cta-button {
  background: linear-gradient(
    135deg,
    var(--accent) 0%,
    rgba(var(--accent-rgb), 0.8) 100%
  );
  border: 1px solid rgba(var(--accent-rgb), 0.3);
  border-radius: 12px;
  box-shadow: 
    0 4px 12px rgba(var(--accent-rgb), 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.1) inset;
  transition: all 0.2s ease;
}

.u-cta-button:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 8px 24px rgba(var(--accent-rgb), 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.2) inset;
}

/* ========== C. 家长端改造 ========== */

/* C1. 概览主页：奖杯+星光粒子装饰 */
.u-parent-hero {
  position: relative;
  overflow: hidden;
}

.u-trophy-decoration {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 60px;
  height: 60px;
  background: linear-gradient(
    135deg,
    #fbbf24 0%,
    #f59e0b 50%,
    #d97706 100%
  );
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
}

.u-starlight-particles {
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(1px 1px at 15% 25%, #fbbf24, transparent),
    radial-gradient(1px 1px at 85% 35%, #f59e0b, transparent),
    radial-gradient(0.5px 0.5px at 45% 15%, #fbbf24, transparent),
    radial-gradient(0.5px 0.5px at 75% 65%, #f59e0b, transparent);
  background-size: 150px 150px, 180px 180px, 120px 120px, 160px 160px;
  animation: starlightFloat 6s ease-in-out infinite;
  opacity: 0.6;
  pointer-events: none;
}

@keyframes starlightFloat {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  33% { transform: translate(2px, -2px) rotate(1deg); }
  66% { transform: translate(-1px, 1px) rotate(-1deg); }
}

/* 孩子选择卡：头像 + 班级标签 */
.u-child-card {
  position: relative;
  background: rgba(var(--surface-1-rgb), 0.8);
  backdrop-filter: blur(8px) saturate(1.1);
  border: 2px solid transparent;
  border-radius: 16px;
  padding: 16px;
  transition: all 0.3s ease;
  cursor: pointer;
}

.u-child-card:hover {
  transform: scale(1.02);
}

.u-child-card.is-selected {
  border-color: var(--accent);
  transform: scale(1.00);
  box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.2);
}

.u-child-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: 3px solid transparent;
  background: linear-gradient(var(--surface-1), var(--surface-1)) padding-box,
              linear-gradient(45deg, var(--accent), rgba(var(--accent-rgb), 0.3)) border-box;
}

.u-class-tag {
  display: inline-block;
  padding: 4px 8px;
  background: rgba(var(--accent-rgb), 0.1);
  border: 1px solid rgba(var(--accent-rgb), 0.3);
  border-radius: 12px;
  font-size: 0.75rem;
  color: var(--accent);
}

/* C2. 成长时间轴 & 里程碑：弧形离子轨道 */
.u-timeline-container {
  position: relative;
}

.u-ionic-orbit {
  position: absolute;
  left: 20px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(
    180deg,
    transparent 0%,
    var(--accent) 20%,
    rgba(var(--accent-rgb), 0.6) 50%,
    var(--accent) 80%,
    transparent 100%
  );
  border-radius: 1px;
}

.u-cruise-light {
  position: absolute;
  left: -3px;
  width: 8px;
  height: 8px;
  background: var(--accent);
  border-radius: 50%;
  box-shadow: 0 0 12px var(--accent);
  animation: cruiseLight 3s ease-in-out infinite;
}

@keyframes cruiseLight {
  0% { top: 0%; opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { top: 100%; opacity: 0; }
}

/* 展开节点彩色粒子绽放 */
.u-timeline-node {
  position: relative;
  transition: all 0.3s ease;
}

.u-timeline-node.is-expanding::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 40px;
  height: 40px;
  margin: -20px 0 0 -20px;
  background: radial-gradient(
    circle,
    var(--accent) 0%,
    rgba(var(--accent-rgb), 0.6) 30%,
    transparent 70%
  );
  border-radius: 50%;
  animation: particleBurst 260ms ease-out;
  pointer-events: none;
}

@keyframes particleBurst {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

/* 里程碑卡：玻璃卡 + 左侧双色边条 */
.u-milestone-card {
  background: rgba(var(--surface-1-rgb), 0.9);
  backdrop-filter: blur(8px) saturate(1.1);
  border: 1px solid rgba(var(--accent-rgb), 0.2);
  border-radius: 12px;
  border-left: 4px solid var(--milestone-color, var(--accent));
  position: relative;
  overflow: hidden;
}

.u-milestone-card.type-dribble {
  --milestone-color: var(--c-dribble, #f59e0b);
}

.u-milestone-card.type-shoot {
  --milestone-color: var(--c-shoot, #ef4444);
}

.u-milestone-card.type-defense {
  --milestone-color: var(--c-defense, #3b82f6);
}

/* C3. 报告查看/下载：淡雾纹理 + 角标 */
.u-report-card {
  position: relative;
  background: rgba(var(--surface-1-rgb), 0.8);
  backdrop-filter: blur(8px) saturate(1.1);
  border: 1px solid rgba(var(--accent-rgb), 0.2);
  border-radius: 16px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s ease;
}

.u-report-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(circle at 30% 20%, rgba(var(--accent-rgb), 0.03) 0%, transparent 50%),
    radial-gradient(circle at 70% 80%, rgba(var(--accent-rgb), 0.02) 0%, transparent 50%);
  pointer-events: none;
}

.u-report-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(var(--accent-rgb), 0.15);
}

.u-report-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  padding: 4px 8px;
  background: var(--accent);
  color: white;
  border-radius: 8px;
  font-size: 0.75rem;
  font-weight: 600;
}

/* 沉浸式预览模态装饰层 */
.u-immersive-preview {
  background: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(12px);
}

.u-preview-content {
  background: var(--surface-1);
  border: 1px solid rgba(var(--accent-rgb), 0.3);
  border-radius: 16px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
}

/* C4. 消息中心/通知：未读高光描边 + 呼吸点 */
.u-message-item {
  position: relative;
  padding: 16px;
  border-radius: 12px;
  transition: all 0.3s ease;
}

.u-message-item.is-unread {
  background: rgba(var(--accent-rgb), 0.05);
  border: 1px solid rgba(var(--accent-rgb), 0.2);
  box-shadow: 0 0 0 1px rgba(var(--accent-rgb), 0.1);
}

.u-message-item.is-read {
  opacity: 0.7;
  filter: saturate(0.8);
}

.u-breathing-dot {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 8px;
  height: 8px;
  background: var(--accent);
  border-radius: 50%;
  animation: breathe 2s ease-in-out infinite;
}

@keyframes breathe {
  0%, 100% { 
    transform: scale(1); 
    opacity: 1; 
    box-shadow: 0 0 0 0 rgba(var(--accent-rgb), 0.7);
  }
  50% { 
    transform: scale(1.2); 
    opacity: 0.8; 
    box-shadow: 0 0 0 4px rgba(var(--accent-rgb), 0);
  }
}

/* 置顶/重要：离子角标 */
.u-ionic-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  width: 16px;
  height: 16px;
  background: linear-gradient(45deg, #fbbf24, #f59e0b);
  border-radius: 50%;
  border: 2px solid var(--surface-1);
  box-shadow: 0 0 8px rgba(251, 191, 36, 0.5);
}

/* C5. 设置/主题预览：主题预览卡 */
.u-theme-preview-card {
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s ease;
}

.u-theme-preview-card:hover {
  transform: scale(1.05);
}

.u-theme-preview-card.theme-light {
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  border: 2px solid #e2e8f0;
}

.u-theme-preview-card.theme-dark {
  background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  border: 2px solid #334155;
}

.u-theme-preview-card:hover .u-theme-animation {
  animation: themeColorFlow 1s ease-in-out;
}

@keyframes themeColorFlow {
  0%, 100% { opacity: 0; }
  50% { opacity: 0.3; }
}

.u-theme-animation {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    45deg,
    var(--accent) 0%,
    rgba(var(--accent-rgb), 0.5) 50%,
    var(--accent) 100%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
}

/* ========== D. 双端通用微细节 ========== */

/* 文本选中颜色 */
::selection {
  background: var(--accent, #835BFF);
  color: var(--bg, #0A0B10);
}

/* 按钮按压反馈 */
:where(button, .btn):active {
  transform: translateY(1px) scale(0.98);
}

/* 环形离子 Loader（纯CSS，读 --accent） */
.u-ionic-loader {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(var(--accent-rgb), 0.2);
  border-top: 3px solid var(--accent);
  border-radius: 50%;
  animation: ionicSpin 1s linear infinite;
  position: relative;
}

.u-ionic-loader::after {
  content: '';
  position: absolute;
  top: -3px;
  left: -3px;
  right: -3px;
  bottom: -3px;
  border: 1px solid rgba(var(--accent-rgb), 0.1);
  border-radius: 50%;
  animation: ionicPulse 2s ease-in-out infinite;
}

@keyframes ionicSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes ionicPulse {
  0%, 100% { 
    transform: scale(1); 
    opacity: 1; 
  }
  50% { 
    transform: scale(1.1); 
    opacity: 0.5; 
  }
}

/* 玻璃滚动条（可选） */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(var(--surface-1-rgb), 0.3);
  border-radius: 4px;
  backdrop-filter: blur(4px);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(
    180deg,
    rgba(var(--accent-rgb), 0.6) 0%,
    rgba(var(--accent-rgb), 0.8) 100%
  );
  border-radius: 4px;
  border: 1px solid rgba(var(--accent-rgb), 0.2);
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(
    180deg,
    rgba(var(--accent-rgb), 0.8) 0%,
    var(--accent) 100%
  );
}

/* 暗色主题滚动条调整 */
:root[data-theme="dark"] ::-webkit-scrollbar-thumb {
  background: linear-gradient(
    180deg,
    rgba(139, 92, 246, 0.6) 0%,
    rgba(139, 92, 246, 0.8) 100%
  );
}

/* 亮色主题滚动条调整 */
:root[data-theme="light"] ::-webkit-scrollbar-thumb {
  background: linear-gradient(
    180deg,
    rgba(168, 85, 247, 0.6) 0%,
    rgba(168, 85, 247, 0.8) 100%
  );
}

/* ========== 打印样式 ========== */
@media print {
  /* 切到高对比浅色皮肤 */
  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  /* 隐藏装饰性元素 */
  .u-starlight-particles,
  .u-trophy-decoration,
  .u-ionic-orbit,
  .u-cruise-light,
  .u-breathing-dot,
  .u-ionic-badge,
  .u-video-glow-border,
  .u-hit-flash,
  .u-skeleton,
  .u-ionic-loader {
    display: none !important;
  }
  
  /* 简化边框和背景 */
  .u-glass-border,
  .u-table-glass,
  .u-input-glass,
  .u-modal-content,
  .u-toast,
  .u-tooltip,
  .u-report-card,
  .u-child-card,
  .u-milestone-card,
  .u-message-item {
    background: white !important;
    border: 1px solid #ccc !important;
    backdrop-filter: none !important;
  }
  
  /* 确保文本可读性 */
  h1, h2, h3, h4, h5, h6 {
    color: black !important;
    font-weight: bold !important;
  }
  
  /* 隐藏导航和装饰 */
  nav, .sidebar, .header-decoration {
    display: none !important;
  }
  
  /* 调整页面布局 */
  .main-content {
    margin: 0 !important;
    padding: 20px !important;
  }
}

/* 网格背景 - 运球页节奏网格 */
.u-grid-rhythm {
  position: relative;
  background-image: 
    linear-gradient(rgba(var(--accent-rgb), 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(var(--accent-rgb), 0.03) 1px, transparent 1px);
  background-size: 24px 24px;
  background-position: 0 0, 0 0;
}

/* 节奏波纹动画 - 运球页中心装饰 */
.u-rhythm-pulse {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 120px;
  height: 120px;
  margin: -60px 0 0 -60px;
  border-radius: 50%;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    var(--accent) 90deg,
    transparent 180deg,
    var(--accent) 270deg,
    transparent 360deg
  );
  opacity: 0.1;
  animation: rhythmSpin 3s linear infinite;
  pointer-events: none;
  z-index: 0;
}

@keyframes rhythmSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* 磁吸粒子效果 - 运球页微交互 */
.u-magnetic-particles {
  position: relative;
  overflow: hidden;
}

.u-magnetic-particles::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(
    circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
    rgba(var(--accent-rgb), 0.05) 0%,
    transparent 50%
  );
  pointer-events: none;
  transition: opacity 0.3s ease;
  opacity: 0;
}

.u-magnetic-particles:hover::before {
  opacity: 1;
}

/* 投篮弧线轨迹 */
.u-shooting-arc {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
}

.u-shooting-arc svg {
  width: 100%;
  height: 100%;
}

.u-arc-path {
  fill: none;
  stroke: var(--accent);
  stroke-width: 2;
  stroke-dasharray: 10 5;
  stroke-dashoffset: 0;
  opacity: 0.6;
  animation: arcFlow 2s ease-in-out infinite;
}

@keyframes arcFlow {
  0%, 100% { stroke-dashoffset: 0; opacity: 0.6; }
  50% { stroke-dashoffset: -15; opacity: 0.8; }
}

/* 圆形进度环 - 投篮评分 */
.u-progress-ring {
  position: relative;
  width: 80px;
  height: 80px;
}

.u-progress-ring svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.u-progress-ring-bg {
  fill: none;
  stroke: rgba(var(--accent-rgb), 0.1);
  stroke-width: 6;
}

.u-progress-ring-progress {
  fill: none;
  stroke: var(--accent);
  stroke-width: 6;
  stroke-linecap: round;
  stroke-dasharray: 251.2; /* 2 * π * 40 */
  stroke-dashoffset: 251.2;
  transition: stroke-dashoffset 1s ease-in-out;
  filter: drop-shadow(0 0 8px var(--accent));
}

/* 四色标签分栏 - AI建议卡 */
.u-four-color-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.u-color-tag {
  position: relative;
  padding: 16px;
  border-radius: 12px;
  background: var(--surface-2);
  border-left: 4px solid var(--tag-color, var(--accent));
}

.u-color-tag.tag-strength { --tag-color: #10b981; }
.u-color-tag.tag-improve { --tag-color: #f59e0b; }
.u-color-tag.tag-suggest { --tag-color: #3b82f6; }
.u-color-tag.tag-risk { --tag-color: #ef4444; }

/* 动态盾牌背景 - 防守页 */
.u-shield-bg {
  position: relative;
  overflow: hidden;
}

.u-shield-bg::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 200px;
  height: 240px;
  margin: -120px 0 0 -100px;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 10 L80 25 L80 70 Q80 90 50 110 Q20 90 20 70 L20 25 Z' fill='none' stroke='%23059669' stroke-width='1' opacity='0.1'/%3E%3C/svg%3E") no-repeat center;
  background-size: contain;
  pointer-events: none;
  animation: shieldPulse 4s ease-in-out infinite;
  z-index: 0;
}

@keyframes shieldPulse {
  0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.1; }
  50% { transform: scale(1.05) rotate(1deg); opacity: 0.2; }
}

/* 离子高光分隔线 */
.u-ionic-separator {
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--accent) 20%,
    rgba(var(--accent-rgb), 0.8) 50%,
    var(--accent) 80%,
    transparent 100%
  );
  margin: 24px 0;
  position: relative;
}

.u-ionic-separator::before {
  content: '';
  position: absolute;
  top: -1px;
  left: 0;
  right: 0;
  height: 3px;
  background: inherit;
  filter: blur(2px);
  opacity: 0.5;
}

/* 异常项标记 */
[data-level="warn"] {
  position: relative;
  border-left: 3px solid #f59e0b;
  background: rgba(245, 158, 11, 0.05);
}

[data-level="error"] {
  position: relative;
  border-left: 3px solid #ef4444;
  background: rgba(239, 68, 68, 0.05);
}

/* AI结果卡出场动画 */
.u-ai-card-enter {
  animation: aiCardEnter 420ms ease-out forwards;
}

@keyframes aiCardEnter {
  0% {
    transform: scale(0.96) translateY(12px);
    opacity: 0;
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

/* 霓虹主按钮 */
.btn-neon {
  position: relative;
  background: var(--accent);
  border: 1px solid var(--accent);
  color: white;
  transition: all 0.3s ease;
  overflow: hidden;
}

.btn-neon::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transition: left 0.5s ease;
}

.btn-neon:hover::before {
  left: 100%;
}

.btn-neon:hover {
  box-shadow: 0 0 20px rgba(var(--accent-rgb), 0.5);
  transform: translateY(-1px);
}

/* 玻璃输入框 */
.input-glass {
  background: rgba(var(--surface-1-rgb), 0.8);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(var(--accent-rgb), 0.2);
  transition: all 0.3s ease;
}

.input-glass:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.1);
}

/* 渐变描边 Focus Ring */
.focus-ring-gradient {
  position: relative;
}

.focus-ring-gradient:focus-within::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, var(--accent), transparent, var(--accent));
  border-radius: inherit;
  z-index: -1;
  animation: focusRingRotate 2s linear infinite;
}

@keyframes focusRingRotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* 涟漪效果 */
.u-ripple {
  position: relative;
  overflow: hidden;
}

.u-ripple::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s ease, height 0.6s ease;
}

.u-ripple:active::after {
  width: 300px;
  height: 300px;
}

/* 性能优化 - 硬件加速和合成层 */
.u-rhythm-pulse,
.u-magnetic-particles::before,
.u-shooting-arc,
.u-shield-bg::before,
.u-arc-trajectory,
.u-spark-particles::before,
.u-spark-particles::after,
.btn-neon::before,
.focus-ring-gradient::before,
.u-ripple::after {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* 减少重绘和回流 */
.u-card-glass,
.u-glass-border,
.input-glass {
  contain: layout style paint;
}

/* 优化动画性能 */
@keyframes optimizedPulse {
  0%, 100% { transform: translateZ(0) scale(1); opacity: 0.6; }
  50% { transform: translateZ(0) scale(1.05); opacity: 0.8; }
}

@keyframes optimizedFloat {
  0%, 100% { transform: translateZ(0) translateY(0px); }
  50% { transform: translateZ(0) translateY(-8px); }
}

/* Motion reduction - 增强可访问性 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .scroll-indicator,
  .particles-spark[data-keep]::before,
  .particles-spark[data-keep]::after,
  .enter-cascade > *,
  .u-rhythm-pulse,
  .u-arc-path,
  .u-ai-card-enter,
  .btn-neon::before,
  .focus-ring-gradient::before,
  .u-shield-bg::before,
  .u-arc-trajectory,
  .u-spark-particles::before,
  .u-spark-particles::after,
  .u-ripple::after { 
    animation: none !important; 
    transition: none !important; 
    transform: none !important; 
    opacity: 1 !important; 
  }
  
  .u-ai-card-enter {
    opacity: 1;
    transform: none;
  }
}

/* TrendCharts 专用动态效果 */
.recharts-line-curve.chart-line-animate {
  stroke-dasharray: 2000;
  stroke-dashoffset: 2000;
  animation: trend-line-draw 1.8s ease-out forwards;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
}

.chart-line-dot {
  animation: trend-dot-pop 0.8s ease-out forwards;
  transform-origin: center;
  opacity: 0;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
}

@keyframes trend-line-draw {
  from {
    stroke-dashoffset: 2000;
  }
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes trend-dot-pop {
  from {
    transform: scale(0.3);
    opacity: 0;
  }
  60% {
    transform: scale(1.15);
    opacity: 1;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@media (prefers-reduced-motion: reduce) {
  .recharts-line-curve.chart-line-animate {
    animation: none;
    stroke-dashoffset: 0;
  }

  .chart-line-dot {
    animation: none;
    opacity: 1;
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  .u-card-glass {
    background: var(--surface-0);
    border: 2px solid var(--stroke-1);
  }
  
  .btn-neon {
    border: 2px solid var(--accent);
    background: var(--accent);
  }
  
  .focus-ring-gradient:focus-visible {
    outline: 3px solid var(--accent);
    outline-offset: 2px;
  }
}
